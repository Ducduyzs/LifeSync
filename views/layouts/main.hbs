<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{pageTitle}}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <link href="/css/auth.css" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet">
  <link href="/css/navbar.css" rel="stylesheet">
  <link href="/css/tagModal.css" rel="stylesheet">
  <link href="/css/taskModal.css" rel="stylesheet">
  <link href="/css/health.css" rel="stylesheet">





</head>

<body class="bg-rose-100 min-h-screen flex flex-col font-[Poppins]">

  {{> navbar }}

  <div class="flex flex-1">

    {{> sidebar }}

    <main class="flex-1 p-6 bg-pink-50 rounded-tl-3xl shadow-inner">

      {{!-- TASK MODAL --}}
      <div id="taskModal" class="task-modal">
        <div class="task-modal-content">

          <div class="flex justify-between items-center mb-5 border-b pb-2 border-pink-200">
            <h5 class="fw-semibold text-lg text-rose-600 flex items-center gap-2">
              <i class="bi bi-plus-circle-fill text-rose-400"></i>
              Add New Task
            </h5>
            <div class="text-sm text-gray-400 italic pe-1">Plan your day ‚ú®</div>

            <select id="taskTypeSelect" class="form-select form-select-sm w-auto bg-pink-100 border-0 text-rose-600 fw-semibold">
              <option value="task" selected>Task</option>
              <option value="project">Project Chain</option>
            </select>
          </div>

          <form id="taskForm" class="task-form">
            
            <div class="mb-3">
              <label class="form-label fw-medium">Task title</label>
              <input type="text" id="taskTitle" class="form-control task-input" placeholder="Enter task name" required>
            </div>

            <div class="mb-3">
              <label class="form-label fw-medium">Write some note</label>
              <textarea id="taskNote" class="form-control task-textarea" rows="3" placeholder="Write your note here..."></textarea>
            </div>

            <div class="d-flex justify-content-between mb-3 gap-2">
              <div class="flex-fill">
                <label class="form-label">Start time</label>
                <input type="time" id="taskStart" class="form-control task-input text-center">
              </div>
              <div class="flex-fill">
                <label class="form-label">End time</label>
                <input type="time" id="taskEnd" class="form-control task-input text-center">
              </div>
            </div>

            <div class="d-flex justify-content-between mb-3 gap-2">
              <div class="flex-fill">
                <label class="form-label">Start date</label>
                <input type="date" id="taskStartDate" class="form-control task-input text-center">
              </div>
              <div class="flex-fill">
                <label class="form-label">End date</label>
                <input type="date" id="taskEndDate" class="form-control task-input text-center">
              </div>
            </div>

            <div class="task-priority-tag mb-3">

              <div class="priority-col">
                <label class="form-label d-block">Priority</label>
                <select id="taskPriority" class="form-select task-select text-center w-100">
                  <option value="Low">üåø Low</option>
                  <option value="Medium" selected>üå∏ Medium</option>
                  <option value="High">‚≠ê High</option>
                </select>
              </div>

              <div class="tag-col">
                <label class="form-label">Tag</label>

                <div class="tag-row d-flex gap-2">

                  <select id="taskTagSelect" class="form-select task-select text-center">
                    <option value="">-- No tag --</option>
                  </select>

                  <button type="button" id="openTagModal" class="btn btn-add-tag">
                    <i class="bi bi-plus-lg me-1"></i> Add
                  </button>

                  <button type="button" id="openTagManager" class="btn btn-light rounded-pill px-3 shadow-sm"
                          style="background:#ffe2e2;color:#d46a6a;">
                    <i class="bi bi-gear-fill"></i>
                  </button>

                </div>
              </div>
            </div>

            <div class="d-flex justify-content-center gap-3 mt-4">
              <button type="button" id="closeTaskModal" class="btn btn-cancel">Cancel</button>
              <button type="submit" class="btn btn-save">Save Task</button>
            </div>

          </form>

        </div>
      </div>

      {{{body}}}

      {{!-- TASK DETAIL MODAL --}}
      <div id="taskDetailModal" class="task-modal hidden">
        <div class="task-modal-content">
          <button id="closeTaskDetailModal" class="absolute top-3 right-4 text-gray-400 hover:text-gray-600">
            <i class="bi bi-x-lg"></i>
          </button>

          <div id="taskDetailBox"></div>
        </div>
      </div>

    </main>
  </div>

  {{!-- TAG MODAL --}}
  <div id="tagModal" class="tag-modal">
    <div class="tag-modal-content">
      <h5 class="text-center mb-4 fw-semibold">Add new tag</h5>

      <form id="tagForm" data-mode="add" data-id="">

        <div class="mb-4">
          <label for="tagName" class="form-label fw-medium">Tag title</label>
          <input type="text" id="tagName" class="form-control tag-input text-center" placeholder="Enter tag title" required>
        </div>

        <div class="mb-4">
          <label class="form-label fw-medium d-block text-center mb-2">Choose a color</label>

          <div class="d-flex flex-wrap gap-3 justify-content-center mt-2">
            <div class="color-square" data-color="#FFCACA" style="background-color:#FFCACA"></div>
            <div class="color-square" data-color="#FFD6A5" style="background-color:#FFD6A5"></div>
            <div class="color-square" data-color="#FFFD95" style="background-color:#FFFD95"></div>
            <div class="color-square" data-color="#CAFFBF" style="background-color:#CAFFBF"></div>
            <div class="color-square" data-color="#9BF6FF" style="background-color:#9BF6FF"></div>
            <div class="color-square" data-color="#A0C4FF" style="background-color:#A0C4FF"></div>
            <div class="color-square" data-color="#BDB2FF" style="background-color:#BDB2FF"></div>
          </div>

          <input type="hidden" id="selectedColor" value="#FFCACA">
        </div>

        <div class="d-flex justify-content-center gap-3 mt-4">
          <button type="button" id="closeTagModal" class="btn btn-cancel">Cancel</button>
          <button type="submit" class="btn btn-save">Save</button>
        </div>

      </form>
    </div>
  </div>

  {{!-- DELETE TASK CONFIRM --}}
  <div id="deleteConfirmModal" class="task-modal hidden">
    <div class="task-modal-content p-6 rounded-3xl bg-white text-center shadow-xl">

      <h5 class="fw-semibold text-lg text-red-500 mb-3">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        Delete Task?
      </h5>

      <p class="text-gray-600 mb-4">
        This action cannot be undone. Are you sure you want to delete this task?
      </p>

      <div class="d-flex justify-content-center gap-3">
        <button id="cancelDelete" class="btn btn-cancel px-4">Cancel</button>
        <button id="confirmDelete" class="btn btn-danger px-4 py-2 rounded-pill">
          <i class="bi bi-trash"></i> Delete
        </button>
      </div>

    </div>
  </div>

  {{!-- TAG MANAGER MODAL --}}
  <div id="tagManagerModal" class="task-modal hidden">
    <div class="task-modal-content p-6 rounded-3xl bg-white shadow-xl relative" style="max-width:450px;">

      <button id="closeTagManagerModal" class="absolute top-3 right-4 text-gray-400 hover:text-gray-600">
        <i class="bi bi-x-lg"></i>
      </button>

      <h5 class="fw-semibold text-lg text-pink-600 mb-3 flex items-center gap-2">
        <i class="bi bi-tags-fill text-pink-400"></i>
        Manage Tags
      </h5>

      <div id="tagManagerList" class="space-y-3"></div>

    </div>
  </div>

  {{!-- DELETE TAG CONFIRM --}}
  <div id="tagDeleteConfirmModal" class="task-modal hidden">
    <div class="task-modal-content p-6 rounded-3xl bg-white shadow-xl" style="max-width:420px;">

      <h5 class="text-center text-pink-600 fw-semibold mb-2">
        <i class="bi bi-exclamation-triangle-fill text-pink-400"></i>
        Delete Tag?
      </h5>

      <div class="flex justify-center gap-3">
        <button id="cancelDeleteTag" class="btn btn-cancel px-4">Cancel</button>
        <button id="confirmDeleteTag" class="btn btn-danger px-4">
          <i class="bi bi-trash"></i> Delete
        </button>
      </div>

    </div>
  </div>
  {{> projectModal}}
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/sidebar.js"></script>
  <script src="/js/tagModal.js"></script>
  <script src="/js/taskTemplate.js" type="module"></script>
  <script src="/js/projectChains.js" type="module"></script>
  <script src="/js/dateNavigation.js" type="module"></script>
  <script src="/js/taskModal.js" type="module"></script>
  <script src="/js/projectModal.js" type="module"></script>
  <script src="/js/projectDetail.js"></script>
  <script src="/js/dateNavigation.js"></script>
  <script src="/js/health.js"></script>


</body>

</html>
